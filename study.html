<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quest Dungeon - Study Timer</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Orbitron', monospace;
            background: linear-gradient(135deg, #0a0e2e 0%, #1a1a3a 50%, #2d1b69 100%);
            color: #00d4ff;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
        }
        

        
        /* Main container */
        .quest-container {
            background: rgba(10, 14, 46, 0.9);
            border: 2px solid #00d4ff;
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            box-shadow: 
                0 0 50px rgba(0, 212, 255, 0.3),
                inset 0 0 30px rgba(0, 212, 255, 0.1);
            backdrop-filter: blur(10px);
            position: relative;
            z-index: 2;
            max-width: 600px;
            width: 90%;
        }
        
        .quest-title {
            font-size: 2.5rem;
            font-weight: 900;
            color: #00d4ff;
            text-shadow: 0 0 20px rgba(0, 212, 255, 0.8);
            margin-bottom: 20px;
            animation: glow 2s ease-in-out infinite alternate;
        }
        
        /* Mobile responsive styles */
        @media (max-width: 768px) {
            body {
                padding: 20px 10px;
                min-height: 100vh;
                display: flex;
                align-items: flex-start;
                padding-top: 40px;
            }
            
            .quest-container {
                padding: 25px 20px;
                margin-top: 20px;
                width: 95%;
                max-width: none;
            }
            
            .quest-title {
                font-size: 1.8rem;
                margin-bottom: 15px;
            }
            
            .quest-subtitle {
                font-size: 0.85rem;
                margin-bottom: 20px;
            }
            
            .date-info {
                font-size: 1rem;
                margin-bottom: 20px;
                padding: 12px;
            }
            
            .timer-display {
                font-size: 2.5rem;
                margin: 20px 0;
            }
            
            .stats {
                grid-template-columns: 1fr;
                gap: 15px;
                margin-top: 20px;
            }
            
            .stat-box {
                padding: 12px;
            }
            
            .stat-label {
                font-size: 0.8rem;
            }
            
            .stat-value {
                font-size: 1.2rem;
            }
        }
        
        @media (max-width: 480px) {
            .quest-container {
                padding: 20px 15px;
            }
            
            .quest-title {
                font-size: 1.5rem;
            }
            
            .quest-subtitle {
                font-size: 0.8rem;
            }
            
            .date-info {
                font-size: 0.9rem;
                padding: 10px;
            }
            
            .timer-display {
                font-size: 2rem;
            }
            
            .stat-label {
                font-size: 0.75rem;
            }
            
            .stat-value {
                font-size: 1.1rem;
            }
        }
        
        @keyframes glow {
            from {
                text-shadow: 0 0 20px rgba(0, 212, 255, 0.8);
            }
            to {
                text-shadow: 0 0 30px rgba(0, 212, 255, 1), 0 0 40px rgba(0, 212, 255, 0.8);
            }
        }
        
        .quest-subtitle {
            font-size: 1rem;
            color: #a0c4ff;
            margin-bottom: 30px;
            opacity: 0.8;
        }
        
        .date-info {
            font-size: 1.2rem;
            color: #fff;
            margin-bottom: 30px;
            padding: 15px;
            background: rgba(0, 212, 255, 0.1);
            border-radius: 10px;
            border: 1px solid rgba(0, 212, 255, 0.3);
        }
        
        .timer-display {
            font-size: 4rem;
            font-weight: 700;
            color: #00ff88;
            text-shadow: 0 0 30px rgba(0, 255, 136, 0.8);
            margin: 30px 0;
            font-family: 'Orbitron', monospace;
            animation: pulse 2s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }
        
        .progress-bar {
            width: 100%;
            height: 20px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
            border: 1px solid #00d4ff;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00d4ff, #00ff88);
            border-radius: 10px;
            transition: width 1s ease;
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.6);
        }
        
        .stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }
        
        .stat-box {
            background: rgba(0, 212, 255, 0.1);
            border: 1px solid rgba(0, 212, 255, 0.3);
            border-radius: 10px;
            padding: 15px;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #a0c4ff;
            margin-bottom: 5px;
        }
        
        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: #00ff88;
        }
        
        /* Status indicator - removed */
    </style>
</head>
<body>
    <div class="quest-container">
        <h1 class="quest-title">QUEST DUNGEON</h1>
        <p class="quest-subtitle">Study Timer - Level Up Your Knowledge</p>
        
        <div class="date-info" id="dateInfo"></div>
        
        <div class="timer-display" id="timerDisplay">00:00:00</div>
        
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>
        
        <div class="stats">
            <div class="stat-box">
                <div class="stat-label">Waktu Tersisa Hari Ini</div>
                <div class="stat-value" id="remainingTime">0 Jam</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">Status Quest</div>
                <div class="stat-value" id="questStatus">Loading...</div>
            </div>
        </div>
    </div>

    <script>
        // Data libur nasional Indonesia 2025
        const holidays = [
            {"tanggal":"2025-01-1","keterangan":"Tahun Baru 2025 Masehi"},
            {"tanggal":"2025-01-27","keterangan":"Isra' Mi'raj Nabi Muhammad SAW"},
            {"tanggal":"2025-01-28","keterangan":"Cuti Bersama Tahun Baru Imlek 2576 Kongzili"},
            {"tanggal":"2025-01-29","keterangan":"Tahun Baru Imlek 2576 Kongzili"},
            {"tanggal":"2025-03-28","keterangan":"Cuti Bersama Hari Raya Nyepi Tahun Baru Saka 1947"},
            {"tanggal":"2025-03-29","keterangan":"Hari Raya Nyepi Tahun Baru Saka 1947"},
            {"tanggal":"2025-03-31","keterangan":"Hari Raya Idul Fitri 1446H"},
            {"tanggal":"2025-04-1","keterangan":"Hari Raya Idul Fitri 1446H"},
            {"tanggal":"2025-04-2","keterangan":"Cuti Bersama Hari Raya Idul Fitri 1446H"},
            {"tanggal":"2025-04-3","keterangan":"Cuti Bersama Hari Raya Idul Fitri 1446H"},
            {"tanggal":"2025-04-4","keterangan":"Cuti Bersama Hari Raya Idul Fitri 1446H"},
            {"tanggal":"2025-04-7","keterangan":"Cuti Bersama Hari Raya Idul Fitri 1446H"},
            {"tanggal":"2025-04-18","keterangan":"Wafat Yesus Kristus"},
            {"tanggal":"2025-04-20","keterangan":"Kebangkitan Yesus Kristus"},
            {"tanggal":"2025-05-1","keterangan":"Hari Buruh Internasional"},
            {"tanggal":"2025-05-12","keterangan":"Hari Raya Waisak 2569 BE"},
            {"tanggal":"2025-05-13","keterangan":"Cuti Bersama Hari Raya Waisak 2569 BE"},
            {"tanggal":"2025-05-29","keterangan":"Kenaikan Yesus Kristus"},
            {"tanggal":"2025-05-30","keterangan":"Cuti Bersama Kenaikan Yesus Kristus"},
            {"tanggal":"2025-06-1","keterangan":"Hari Lahir Pancasila"},
            {"tanggal":"2025-06-6","keterangan":"Hari Raya Idul Adha 1446H"},
            {"tanggal":"2025-06-9","keterangan":"Cuti Bersama Hari Raya Idul Adha 1446H"},
            {"tanggal":"2025-06-27","keterangan":"Tahun Baru Islam 1 Muharram 1447H"},
            {"tanggal":"2025-08-17","keterangan":"Hari Kemerdekaan Republik Indonesia ke 80"},
            {"tanggal":"2025-09-5","keterangan":"Maulid Nabi Muhammad SAW"},
            {"tanggal":"2025-12-25","keterangan":"Hari Raya Natal"},
            {"tanggal":"2025-12-26","keterangan":"Cuti Bersama Hari Raya Natal"}
        ];

        const dayNames = ['Minggu', 'Senin', 'Selasa', 'Rabu', 'Kamis', 'Jumat', 'Sabtu'];

        function createParticles() {
            // Particles removed for better mobile performance
        }

        function isHoliday(date) {
            const dateStr = date.getFullYear() + '-' + 
                          String(date.getMonth() + 1).padStart(2, '0') + '-' + 
                          String(date.getDate()).padStart(2, '0');
            return holidays.some(holiday => holiday.tanggal === dateStr);
        }

        function getDayType(date) {
            const dayOfWeek = date.getDay(); // 0 = Sunday, 1 = Monday, ..., 6 = Saturday
            
            if (isHoliday(date) || dayOfWeek === 0 || dayOfWeek === 6) {
                return 'weekend'; // Weekend atau libur
            } else if (dayOfWeek === 5) {
                return 'friday'; // Jumat
            } else {
                return 'weekday'; // Senin - Kamis
            }
        }

        function getStudyHours(dayType) {
            switch(dayType) {
                case 'weekday': return 7; // Senin-Kamis: 7 jam
                case 'friday': return 8;  // Jumat: 8 jam (pulang jam 15.00)
                case 'weekend': return 17; // Sabtu-Minggu/libur: 17 jam (04.00-21.00)
                default: return 7;
            }
        }

        function getStudyTimeRange(dayType) {
            const now = new Date();
            const currentHour = now.getHours();
            
            switch(dayType) {
                case 'weekday':
                case 'friday':
                    // Weekday: waktu luang 04.00-06.00 dan 16.00-21.00 (atau 15.00-21.00 untuk Jumat)
                    const endSchool = dayType === 'friday' ? 15 : 16;
                    if (currentHour >= 4 && currentHour < 6) {
                        return { start: 4, end: 6, phase: 'morning' };
                    } else if (currentHour >= endSchool && currentHour < 21) {
                        return { start: endSchool, end: 21, phase: 'afternoon' };
                    } else {
                        return { start: 4, end: 21, phase: 'full' }; // Untuk perhitungan total
                    }
                case 'weekend':
                    return { start: 4, end: 21, phase: 'full' };
                default:
                    return { start: 4, end: 21, phase: 'full' };
            }
        }

        function calculateRemainingTime() {
            const now = new Date();
            const dayType = getDayType(now);
            const timeRange = getStudyTimeRange(dayType);
            const currentHour = now.getHours();
            const currentMinute = now.getMinutes();
            const currentSecond = now.getSeconds();
            
            let remainingSeconds = 0;
            let totalDaySeconds = 0;
            let elapsedSeconds = 0;
            
            if (dayType === 'weekend') {
                // Weekend: 04.00-21.00
                if (currentHour >= 4 && currentHour < 21) {
                    const endTime = 21 * 3600; // 21:00 dalam detik
                    const currentTime = currentHour * 3600 + currentMinute * 60 + currentSecond;
                    remainingSeconds = endTime - currentTime;
                    elapsedSeconds = currentTime - (4 * 3600); // Mulai dari 04:00
                } else if (currentHour < 4) {
                    // Belum mulai, hitung dari jam 4
                    const startTime = 4 * 3600;
                    const currentTime = currentHour * 3600 + currentMinute * 60 + currentSecond;
                    remainingSeconds = (21 * 3600) - (4 * 3600); // Total waktu
                    elapsedSeconds = 0;
                } else {
                    // Sudah lewat jam 21, hari sudah selesai
                    remainingSeconds = 0;
                    elapsedSeconds = 17 * 3600; // Total 17 jam
                }
                totalDaySeconds = 17 * 3600; // 17 jam total
            } else {
                // Weekday dan Friday
                const endSchool = dayType === 'friday' ? 15 : 16;
                const morningStudy = 2 * 3600; // 04.00-06.00 = 2 jam
                const afternoonStudy = (21 - endSchool) * 3600; // sampai 21.00
                
                totalDaySeconds = morningStudy + afternoonStudy;
                
                if (currentHour >= 4 && currentHour < 6) {
                    // Sedang dalam waktu belajar pagi
                    const endMorning = 6 * 3600;
                    const currentTime = currentHour * 3600 + currentMinute * 60 + currentSecond;
                    const morningRemaining = endMorning - currentTime;
                    remainingSeconds = morningRemaining + afternoonStudy;
                    elapsedSeconds = currentTime - (4 * 3600);
                } else if (currentHour >= 6 && currentHour < endSchool) {
                    // Sedang sekolah, sisa waktu hanya sore
                    remainingSeconds = afternoonStudy;
                    elapsedSeconds = morningStudy;
                } else if (currentHour >= endSchool && currentHour < 21) {
                    // Sedang dalam waktu belajar sore
                    const endDay = 21 * 3600;
                    const currentTime = currentHour * 3600 + currentMinute * 60 + currentSecond;
                    remainingSeconds = endDay - currentTime;
                    elapsedSeconds = morningStudy + (currentTime - (endSchool * 3600));
                } else if (currentHour < 4) {
                    // Belum mulai hari ini
                    remainingSeconds = totalDaySeconds;
                    elapsedSeconds = 0;
                } else {
                    // Sudah selesai hari ini
                    remainingSeconds = 0;
                    elapsedSeconds = totalDaySeconds;
                }
            }
            
            return {
                remaining: Math.max(0, remainingSeconds),
                total: totalDaySeconds,
                elapsed: Math.min(elapsedSeconds, totalDaySeconds),
                dayType: dayType
            };
        }

        function formatTime(seconds) {
            const hours = Math.floor(seconds / 3600);
            const minutes = Math.floor((seconds % 3600) / 60);
            const secs = seconds % 60;
            return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        function updateDisplay() {
            const now = new Date();
            const dayType = getDayType(now);
            const timeData = calculateRemainingTime();
            
            // Update date info
            const dayName = dayNames[now.getDay()];
            const dateStr = now.getDate().toString().padStart(2, '0') + '/' + 
                          (now.getMonth() + 1).toString().padStart(2, '0') + '/' + 
                          now.getFullYear().toString().substr(-2);
            
            let message = '';
            let statusClass = '';
            
            switch(dayType) {
                case 'weekday':
                    message = `Hari ini adalah hari ${dayName}, (${dateStr}). Saatnya bekerja!`;
                    statusClass = 'status-weekday';
                    break;
                case 'friday':
                    message = `Hari ini adalah hari ${dayName}, (${dateStr}). Dikit lagi liburan, Semangat!`;
                    statusClass = 'status-friday';
                    break;
                case 'weekend':
                    message = `Hari ini adalah hari ${dayName}, (${dateStr}). Liburan harus tetap produktif ya!`;
                    statusClass = 'status-weekend';
                    break;
            }
            
            document.getElementById('dateInfo').textContent = message;
            document.getElementById('timerDisplay').textContent = formatTime(timeData.remaining);
            
            // Update progress bar
            const progress = ((timeData.elapsed / timeData.total) * 100);
            document.getElementById('progressFill').style.width = progress + '%';
            
            // Update stats
            const remainingHours = Math.floor(timeData.remaining / 3600);
            const remainingMinutes = Math.floor((timeData.remaining % 3600) / 60);
            document.getElementById('remainingTime').textContent = 
                `${remainingHours}j ${remainingMinutes}m`;
            
            // Update quest status
            let questStatus = 'Active';
            if (timeData.remaining === 0) {
                questStatus = 'Complete';
            } else if (timeData.elapsed === 0) {
                questStatus = 'Pending';
            }
            document.getElementById('questStatus').textContent = questStatus;
        }

        // Initialize
        createParticles();
        updateDisplay();
        
        // Update every second
        setInterval(updateDisplay, 1000);
    </script>
</body>
</html>
